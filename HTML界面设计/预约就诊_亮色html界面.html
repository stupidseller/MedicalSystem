<!doctype html>
<html lang="zh-CN" data-theme="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¢„çº¦å°±è¯Šï¼ˆäº®è‰²ä¸»é¢˜ï¼‰</title>
  <style>
    /* ========== è®¾è®¡ä»¤ç‰Œï¼ˆä¸å‰é¡µä¸€è‡´ï¼‰ ========== */
    :root{
      --bg:#f7f8fb; --panel:#ffffff; --panel-2:#f9fafb; --line:#e5e7eb; --text:#111827; --muted:#6b7280;
      --primary:#2563eb; --primary-600:#1d4ed8; --success:#059669; --warning:#d97706; --danger:#ef4444;
      --shadow:0 10px 30px rgba(0,0,0,.07); --radius-xl:20px; --radius-lg:16px; --radius-md:12px;
    }
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:15px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"PingFang SC","Noto Sans CJK SC","Microsoft YaHei",sans-serif}
    *{box-sizing:border-box}
    .container{max-width:1160px;margin:0 auto;padding:20px}

    /* é¡¶éƒ¨ */
    .topbar{display:flex;align-items:center;gap:12px}
    .logo{width:36px;height:36px;border-radius:12px;background:linear-gradient(135deg,#93c5fd,#dbeafe);display:grid;place-items:center;box-shadow:var(--shadow)}
    .title{font-size:18px;font-weight:800}
    .spacer{flex:1}

    /* é¢æ¿ */
    .panel{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius-xl);box-shadow:var(--shadow);padding:18px;margin-top:16px}
    .panel-title{font-size:18px;font-weight:800;margin-bottom:10px}

    /* æ­¥éª¤æ¡ */
    .steps{display:flex;gap:10px;align-items:center;margin-top:8px}
    .step{display:flex;align-items:center;gap:8px}
    .dot{width:28px;height:28px;border-radius:999px;display:grid;place-items:center;background:#e5edff;color:#1d4ed8;font-weight:800}
    .bar{height:2px;background:var(--line);flex:1;border-radius:999px}

    /* è¡¨å• */
    .grid{display:grid;gap:12px}
    @media(min-width:960px){.grid-3{grid-template-columns:1fr 1fr 1fr}}
    @media(min-width:960px){.grid-2{grid-template-columns:1fr 1fr}}
    .field label{font-size:13px;color:var(--muted)}
    .input,.select{height:44px;display:flex;align-items:center;gap:10px;background:var(--panel-2);border:1px solid var(--line);border-radius:12px;padding:0 12px}
    .input input{border:0;outline:0;background:transparent;width:100%;font-size:14px;color:var(--text)}
    .select select{border:0;outline:0;background:transparent;width:100%;font-size:14px;color:var(--text)}

    /* Chips */
    .chips{display:flex;gap:10px;flex-wrap:wrap}
    .chip{padding:8px 12px;border:1px solid var(--line);background:#f1f5f9;border-radius:999px;font-size:13px;font-weight:600;cursor:pointer}
    .chip[aria-pressed="true"]{background:#e0ecff;border-color:#cfe0ff}

    /* æ—¥å†ä¸æ—¶æ®µ */
    .slot-wrap{display:grid;gap:16px}
    @media(min-width:960px){.slot-wrap{grid-template-columns: 380px 1fr}}
    .calendar{background:var(--panel-2);border:1px solid var(--line);border-radius:16px;padding:12px}
    .calendar .row{display:grid;grid-template-columns:repeat(7,1fr);gap:6px}
    .calendar .day,.calendar .head{height:42px;display:grid;place-items:center;border-radius:10px;font-weight:600}
    .calendar .head{color:#475569}
    .calendar .day{background:#fff;border:1px solid var(--line);cursor:pointer}
    .calendar .day.is-today{outline:2px solid #bfdbfe}
    .calendar .day.is-selected{background:#2563eb;color:#fff;border-color:#2563eb}
    .calendar .day.is-disabled{opacity:.4;cursor:not-allowed}

    .slots{background:var(--panel-2);border:1px solid var(--line);border-radius:16px;padding:12px}
    .slots h4{margin:6px 6px 10px;font-size:14px;color:#334155}
    .slot-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:10px}
    .slot{height:40px;border:1px solid var(--line);border-radius:10px;background:#fff;display:grid;place-items:center;font-weight:700;cursor:pointer}
    .slot[aria-disabled="true"]{opacity:.4;cursor:not-allowed}
    .slot[aria-pressed="true"], .slot:focus{outline:2px solid #93c5fd;background:#e8f0ff}

    /* ä¾§æ æ‘˜è¦ */
    .summary{background:var(--panel-2);border:1px solid var(--line);border-radius:16px;padding:14px}
    .summary h4{margin:0 0 10px;font-size:15px}
    .kv{display:grid;grid-template-columns:100px 1fr;gap:6px;margin-bottom:6px}
    .kv .k{color:var(--muted)}

    /* æç¤ºä¸åº•éƒ¨æŒ‰é’® */
    .remind{background:#fffbe6;border:1px solid #fde68a;border-radius:12px;padding:10px 12px;color:#78350f}
    .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:16px}
    .btn{height:44px;padding:0 18px;border:1px solid var(--line);background:#fff;border-radius:12px;cursor:pointer;font-weight:700}
    .btn-primary{background:var(--primary);color:#fff;border-color:transparent}
    .btn-primary:hover{background:var(--primary-600)}

    /* å¼¹çª— */
    dialog{border:0;border-radius:16px;box-shadow:var(--shadow);width:min(520px,92vw)}
    dialog::backdrop{background:rgba(0,0,0,.2)}
    .modal-head{font-weight:800;font-size:16px;margin-bottom:10px}
  </style>
</head>
<body>
  <div class="container">
    <div class="topbar">
      <div class="logo" aria-hidden="true">ğŸ¥</div>
      <div class="title">é¢„çº¦å°±è¯Š</div>
      <div class="spacer"></div>
    </div>

    <div class="panel">
      <div class="panel-title">é€‰æ‹©å°±è¯Šä¿¡æ¯</div>
      <div class="steps" aria-label="æ­¥éª¤">
        <div class="step"><div class="dot">1</div><div>é€‰æ‹©ç§‘å®¤/åŒ»ç”Ÿ</div></div>
        <div class="bar"></div>
        <div class="step"><div class="dot">2</div><div>é€‰æ‹©æ—¥æœŸ/æ—¶æ®µ</div></div>
        <div class="bar"></div>
        <div class="step"><div class="dot">3</div><div>ç¡®è®¤å¹¶æäº¤</div></div>
      </div>

      <div class="grid grid-3" style="margin-top:14px">
        <label class="select"><select id="dep">
          <option>å¿ƒå†…ç§‘</option><option>ç¥ç»å†…ç§‘</option><option>æ¶ˆåŒ–å†…ç§‘</option><option>éª¨ç§‘</option><option>å„¿ç§‘</option>
        </select></label>
        <label class="select"><select id="doc">
          <option>å¼ ä¸‰ Â· ä¸»ä»»åŒ»å¸ˆ</option><option>æå›› Â· å‰¯ä¸»ä»»åŒ»å¸ˆ</option><option>ç‹äº” Â· ä¸»æ²»åŒ»å¸ˆ</option>
        </select></label>
        <label class="select"><select id="loc">
          <option>æœ¬éƒ¨é—¨è¯Š</option><option>ä¸œé™¢åŒº</option><option>äº’è”ç½‘é—¨è¯Š</option>
        </select></label>
      </div>

      <div class="chips" style="margin-top:10px" aria-label="å°±è¯Šç±»å‹">
        <button class="chip" data-type="åˆè¯Š" aria-pressed="true">åˆè¯Š</button>
        <button class="chip" data-type="å¤è¯Š" aria-pressed="false">å¤è¯Š</button>
        <button class="chip" data-type="å¤æŸ¥" aria-pressed="false">å¤æŸ¥</button>
        <button class="chip" data-type="è¿œç¨‹" aria-pressed="false">è¿œç¨‹é—®è¯Š</button>
      </div>

      <div class="slot-wrap" style="margin-top:14px">
        <!-- å·¦ï¼šæ—¥å† -->
        <section class="calendar" aria-label="é€‰æ‹©æ—¥æœŸ">
          <div class="row head"><div>ä¸€</div><div>äºŒ</div><div>ä¸‰</div><div>å››</div><div>äº”</div><div>å…­</div><div>æ—¥</div></div>
          <div id="cal-grid" class="row" style="grid-auto-rows:42px; grid-template-columns:repeat(7,1fr); gap:6px; flex-wrap:wrap"></div>
        </section>

        <!-- å³ï¼šæ—¶æ®µ + æ‘˜è¦ -->
        <div class="grid grid-2">
          <section class="slots" aria-label="é€‰æ‹©æ—¶æ®µ">
            <h4>ä¸Šåˆ</h4>
            <div id="am" class="slot-grid"></div>
            <h4 style="margin-top:12px">ä¸‹åˆ</h4>
            <div id="pm" class="slot-grid"></div>
          </section>
          <aside class="summary" aria-live="polite">
            <h4>é¢„çº¦æ‘˜è¦</h4>
            <div class="kv"><div class="k">ç§‘å®¤</div><div id="s-dep">å¿ƒå†…ç§‘</div></div>
            <div class="kv"><div class="k">åŒ»ç”Ÿ</div><div id="s-doc">å¼ ä¸‰ Â· ä¸»ä»»åŒ»å¸ˆ</div></div>
            <div class="kv"><div class="k">åœ°ç‚¹</div><div id="s-loc">æœ¬éƒ¨é—¨è¯Š</div></div>
            <div class="kv"><div class="k">ç±»å‹</div><div id="s-type">åˆè¯Š</div></div>
            <div class="kv"><div class="k">æ—¥æœŸ</div><div id="s-date">â€”</div></div>
            <div class="kv"><div class="k">æ—¶æ®µ</div><div id="s-time">â€”</div></div>
            <div class="remind" style="margin-top:10px">è¯·æå‰10åˆ†é’Ÿåˆ°è¾¾å€™è¯ŠåŒºï¼Œæºå¸¦æœ‰æ•ˆè¯ä»¶ä¸åŒ»ä¿å¡ã€‚</div>
          </aside>
        </div>
      </div>

      <div class="actions">
        <button id="submit" class="btn btn-primary" disabled>æäº¤é¢„çº¦</button>
      </div>
    </div>
  </div>

  <dialog id="ok">
    <form method="dialog" style="padding:16px">
      <div class="modal-head">é¢„çº¦å·²æäº¤</div>
      <div style="color:var(--muted);font-size:14px">æˆ‘ä»¬å·²å‘æ‚¨çš„æ‰‹æœºå‘é€ç¡®è®¤çŸ­ä¿¡ï¼Œè¯·æŒ‰æ—¶å°±è¯Šã€‚</div>
      <div class="actions" style="margin-top:12px"><button class="btn btn-primary">å¥½çš„</button></div>
    </form>
  </dialog>

  <script>
    // â€”â€” Chips åˆ‡æ¢ â€”â€”
    document.querySelectorAll('.chip').forEach(c=>{
      c.addEventListener('click',()=>{
        document.querySelectorAll('.chip').forEach(x=>x.setAttribute('aria-pressed','false'));
        c.setAttribute('aria-pressed','true');
        document.getElementById('s-type').textContent = c.dataset.type;
      });
    });

    // â€”â€” ä¸‹æ‹‰åŒæ­¥æ‘˜è¦ â€”â€”
    const dep=document.getElementById('dep'), doc=document.getElementById('doc'), loc=document.getElementById('loc');
    dep.addEventListener('change',()=>document.getElementById('s-dep').textContent=dep.value);
    doc.addEventListener('change',()=>document.getElementById('s-doc').textContent=doc.value);
    loc.addEventListener('change',()=>document.getElementById('s-loc').textContent=loc.value);

    // â€”â€” ç”Ÿæˆæœ¬æœˆå‰©ä½™ 5x7 æ—¥å† â€”â€”
    const cal = document.getElementById('cal-grid');
    const today = new Date();
    const first = new Date(today.getFullYear(), today.getMonth(), 1);
    const startOffset = (first.getDay() || 7) - 1; // ä»¥å‘¨ä¸€ä¸ºé¦–
    const daysInMonth = new Date(today.getFullYear(), today.getMonth()+1, 0).getDate();
    const cells = 35; // 5 è¡Œ
    for(let i=0;i<cells;i++){
      const div=document.createElement('button');
      div.className='day';
      div.setAttribute('type','button');
      const d=i-startOffset+1;
      if(d<1 || d>daysInMonth){
        div.textContent=''; div.disabled=true; div.classList.add('is-disabled');
      }else{
        div.textContent=d;
        const dateObj=new Date(today.getFullYear(), today.getMonth(), d);
        const isPast = dateObj < new Date(today.getFullYear(), today.getMonth(), today.getDate());
        if(isPast){ div.classList.add('is-disabled'); div.disabled=true; }
        if(d===today.getDate()) div.classList.add('is-today');
        div.addEventListener('click',()=>selectDate(dateObj, div));
      }
      cal.appendChild(div);
    }

    let selectedDate=null, selectedSlot=null;

    function selectDate(d, el){
      selectedDate=d; selectedSlot=null; updateSubmit();
      document.querySelectorAll('.calendar .day').forEach(x=>x.classList.remove('is-selected'));
      el.classList.add('is-selected');
      document.getElementById('s-date').textContent = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
      // ç”Ÿæˆæ—¶æ®µï¼ˆæ¨¡æ‹Ÿï¼‰
      genSlots();
    }

    function genSlots(){
      const am=document.getElementById('am'), pm=document.getElementById('pm');
      am.innerHTML=''; pm.innerHTML='';
      const amList=['08:00','08:20','08:40','09:00','09:20','09:40','10:00','10:20'];
      const pmList=['13:30','13:50','14:10','14:30','14:50','15:10','15:30','15:50'];
      const randDisabled = (t)=> (selectedDate && selectedDate.getDate()+t.length)%3===0; // ä¼ªéšæœºç¦ç”¨
      amList.forEach(t=>am.appendChild(makeSlot(t, randDisabled(t))));
      pmList.forEach(t=>pm.appendChild(makeSlot(t, randDisabled(t))));
    }

    function makeSlot(text, disabled){
      const b=document.createElement('button');
      b.className='slot'; b.type='button'; b.textContent=text; b.setAttribute('aria-pressed','false');
      if(disabled){ b.setAttribute('aria-disabled','true'); b.disabled=true; }
      b.addEventListener('click',()=>{ selectSlot(b); });
      return b;
    }

    function selectSlot(btn){
      document.querySelectorAll('.slot').forEach(x=>x.setAttribute('aria-pressed','false'));
      btn.setAttribute('aria-pressed','true');
      selectedSlot = btn.textContent;
      document.getElementById('s-time').textContent = selectedSlot;
      updateSubmit();
    }

    function updateSubmit(){
      const ok = !!(selectedDate && selectedSlot);
      document.getElementById('submit').disabled = !ok;
    }

    // æäº¤
    document.getElementById('submit').addEventListener('click',()=>{
      const dlg=document.getElementById('ok');
      dlg.showModal();
    });
  </script>
</body>
</html>
